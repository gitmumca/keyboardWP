export const keyRusShiftUp = [['Ё', '!', '"', '№', ';', '%', ':', '?', '*', '(', ')', '_', '+', 'Backspace'],
  ['Tab', 'Й', 'Ц', 'У', 'К', 'Е', 'Н', 'Г', 'Ш', 'Щ', 'З', 'Х', 'Ъ', '\\', 'Del'],
  ['Caps Lock', 'Ф', 'Ы', 'В', 'А', 'П', 'Р', 'О', 'Л', 'Д', 'Ж', 'Э', 'Enter'],
  ['Shift', '\\', 'Я', 'Ч', 'С', 'М', 'И', 'Т', 'Ь', 'Б', 'Ю', '/', 'up', 'Shift2'],
  ['Ctrl', 'Win', 'Alt', 'Space', 'Alt', 'Ctrl', 'left', 'down', 'right']];
export const keyEngShiftUp = [['~', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_', '+', 'Backspace'],
  ['Tab', 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', '{', '}', '\\', 'Del'],
  ['Caps Lock', 'A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', ':', '"', 'Enter'],
  ['Shift', '\\', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', '<', '>', '?', 'up', 'Shift2'],
  ['Ctrl', 'Win', 'Alt', 'Space', 'Alt', 'Ctrl', 'left', 'down', 'right']];
export const keyRusShift = [['ё', '!', '"', '№', ';', '%', ':', '?', '*', '(', ')', '_', '+', 'Backspace'],
  ['Tab', 'й', 'ц', 'у', 'к', 'е', 'н', 'г', 'ш', 'щ', 'з', 'х', 'ъ', '\\', 'Del'],
  ['Caps Lock', 'ф', 'ы', 'в', 'а', 'п', 'р', 'о', 'л', 'д', 'ж', 'э', 'Enter'],
  ['Shift', '\\', 'я', 'ч', 'с', 'м', 'и', 'т', 'ь', 'б', 'ю', '/', 'up', 'Shift2'],
  ['Ctrl', 'Win', 'Alt', 'Space', 'Alt', 'Ctrl', 'left', 'down', 'right']];
export const keyEngShift = [['~', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_', '+', 'Backspace'],
  ['Tab', 'q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', '{', '}', '\\', 'Del'],
  ['Caps Lock', 'a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', ':', '"', 'Enter'],
  ['Shift', '\\', 'z', 'x', 'c', 'v', 'b', 'n', 'm', '<', '>', '?', 'up', 'Shift2'],
  ['Ctrl', 'Win', 'Alt', 'Space', 'Alt', 'Ctrl', 'left', 'down', 'right']];

export const keyRusUp = [['Ё', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '-', '=', 'Backspace'],
  ['Tab', 'Й', 'Ц', 'У', 'К', 'Е', 'Н', 'Г', 'Ш', 'Щ', 'З', 'Х', 'Ъ', '\\', 'Del'],
  ['Caps Lock', 'Ф', 'Ы', 'В', 'А', 'П', 'Р', 'О', 'Л', 'Д', 'Ж', 'Э', 'Enter'],
  ['Shift', '\\', 'Я', 'Ч', 'С', 'М', 'И', 'Т', 'Ь', 'Б', 'Ю', ',', 'up', 'Shift2'],
  ['Ctrl', 'Win', 'Alt', 'Space', 'Alt', 'Ctrl', 'left', 'down', 'right']];
export const keyEngUp = [['`', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '-', '=', 'Backspace'],
  ['Tab', 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', '[', ']', '\\', 'Del'],
  ['Caps Lock', 'A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', ';', '\'', 'Enter'],
  ['Shift', '\\', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', ',', '.', '/', 'up', 'Shift2'],
  ['Ctrl', 'Win', 'Alt', 'Space', 'Alt', 'Ctrl', 'left', 'down', 'right']];
export const keyRus = [['ё', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '-', '=', 'Backspace'],
  ['Tab', 'й', 'ц', 'у', 'к', 'е', 'н', 'г', 'ш', 'щ', 'з', 'х', 'ъ', '\\', 'Del'],
  ['Caps Lock', 'ф', 'ы', 'в', 'а', 'п', 'р', 'о', 'л', 'д', 'ж', 'э', 'Enter'],
  ['Shift', '\\', 'я', 'ч', 'с', 'м', 'и', 'т', 'ь', 'б', 'ю', '.', 'up', 'Shift2'],
  ['Ctrl', 'Win', 'Alt', 'Space', 'Alt', 'Ctrl', 'left', 'down', 'right']];
export const keyEng = [['`', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '-', '=', 'Backspace'],
  ['Tab', 'q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', '[', ']', '\\', 'Del'],
  ['Caps Lock', 'a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', ';', '\'', 'Enter'],
  ['Shift', '\\', 'z', 'x', 'c', 'v', 'b', 'n', 'm', ',', '.', '/', 'up', 'Shift2'],
  ['Ctrl', 'Win', 'Alt', 'Space', 'Alt', 'Ctrl', 'left', 'down', 'right']];

export const keys70 = ['Backspace', 'Enter', 'Shift', 'Ctrl', 'Caps Lock'];
export const keysSound = ['Backspace', 'Enter', 'Shift', 'CapsLock', 'Caps Lock'];
export const clickNoAdd = ['Backspace', 'Enter', 'Shift', 'Shift2', 'Ctrl', 'Caps Lock', 'Del', 'Win', 'up', 'left', 'down', 'right', 'Alt', 'Tab'];
export const keysNoAdd = [8, 9, 13, 46, 20, 16, 17, 18, 37, 38, 39, 40, 91];
export const keysNavi = {
  left: '&#9668', up: '&#9650', right: '&#9658', down: '&#9660',
};

export const btnNavi = {
  capslock: false,
  shift: false,
  english: localStorage.getItem('english') === 'true',
  soundOff: false,
  microphone: false,
  hideKeys: false,
};

function addToArea(newSymbol) {
  const textArea = document.querySelector('.text');
  const pos = textArea.selectionStart;

  if (newSymbol === 'Backspace') {
    textArea.value = textArea.value.slice(0, pos - 1)
    + textArea.value.slice(pos, textArea.value.length);
    textArea.selectionStart = pos - 1;
    textArea.selectionEnd = pos - 1;
  } else if (newSymbol === 'Del') {
    textArea.value = textArea.value.slice(0, pos)
    + textArea.value.slice(pos + 1, textArea.value.length);
    textArea.selectionStart = pos;
    textArea.selectionEnd = pos;
  } else { // буквы/цифра/символ
    textArea.value = textArea.value.slice(0, pos) + newSymbol
    + textArea.value.slice(pos, textArea.value.length);
    textArea.selectionStart = pos + 1;
    textArea.selectionEnd = pos + 1;
  }
  textArea.focus();
}

export const SpeechRecognition = new (window.SpeechRecognition
  || window.webkitSpeechRecognition
  || window.mozSpeechRecognition
  || window.msSpeechRecognition)();

SpeechRecognition.onresult = (event) => addToArea(event.results[0][0].transcript);
SpeechRecognition.onend = function func() {
  SpeechRecognition.lang = (btnNavi.english) ? 'en-US' : 'ru-RU';
  if (btnNavi.microphone) SpeechRecognition.start();
};

export function getKeys() {
  if (btnNavi.capslock) {
    if (btnNavi.shift) {
      if (btnNavi.english) { return keyEngShift; }
      return keyRusShift;
    }

    if (btnNavi.english) { return keyEngUp; }
    return keyRusUp;
  }

  if (btnNavi.shift) {
    if (btnNavi.english) { return keyEngShiftUp; }
    return keyRusShiftUp;
  }

  if (btnNavi.english) { return keyEng; }
  return keyRus;
}

export function isNavi(btn) {
  return Object.keys(keysNavi).includes(btn);
}

export function isClickShow(c) {
  return !(clickNoAdd.includes(c));
}

export function isCharShow(c) {
  return !(keysNoAdd.includes(c));
}
